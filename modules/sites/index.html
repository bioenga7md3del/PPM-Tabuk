<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>PPM TABUK â€¢ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„Ø£Ù‚Ø³Ø§Ù…</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/theme-light.css">
</head>
<body>
  <header class="max-w-7xl mx-auto px-3 md:px-6 mt-3">
  <div class="topbar px-3 md:px-4 py-2 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <button class="icon-btn" title="Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="white" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <nav class="flex items-center gap-3 text-white/90">
      <a href="../dashboard/index.html">Dashboard</a>
      <a href="../assets/index.html">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</a>
      <a href="../preventive/index.html">Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©</a>
      <a href="../corrective/index.html">Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ©</a>
      <a href="../sites/index.html">Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</a>
      <a href="../users/index.html" id="navAdmin">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</a>
    </nav>
    <div class="avatar">ğŸ‘¤</div>
  </div>
</header>
  <main class="max-w-7xl mx-auto p-3 md:p-6 space-y-6">

<section class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <div class="card p-4">
    <div class="font-bold mb-3">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆÙ‚Ø¹</div>
    <div class="flex gap-2">
      <input id="siteName" class="field flex-1" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹"/>
      <button id="addSite" class="btn btn-brand">Ø­ÙØ¸</button>
    </div>
    <ul id="sitesList" class="mt-3 space-y-1 text-slate-600 text-sm"></ul>
  </div>
  <div class="card p-4">
    <div class="font-bold mb-3">Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù…</div>
    <div class="flex gap-2">
      <input id="deptName" class="field flex-1" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…"/>
      <button id="addDept" class="btn btn-brand">Ø­ÙØ¸</button>
    </div>
    <ul id="deptsList" class="mt-3 space-y-1 text-slate-600 text-sm"></ul>
  </div>
</section>

<script type="module">
  import { db } from '../../js/firebase.js';
  import { collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";
  async function loadList(col, ulId){
    const ul = document.getElementById(ulId); ul.innerHTML='';
    const qs = await getDocs(query(collection(db,col), orderBy('name')));
    qs.forEach(d=>{ const li=document.createElement('li'); li.textContent = d.data().name; ul.appendChild(li); });
  }
  document.getElementById('addSite').onclick = async ()=>{ const v=document.getElementById('siteName').value.trim(); if(!v) return; await addDoc(collection(db,'sites'), { name:v }); document.getElementById('siteName').value=''; loadList('sites','sitesList'); };
  document.getElementById('addDept').onclick = async ()=>{ const v=document.getElementById('deptName').value.trim(); if(!v) return; await addDoc(collection(db,'departments'), { name:v }); document.getElementById('deptName').value=''; loadList('departments','deptsList'); };
  loadList('sites','sitesList'); loadList('departments','deptsList');
</script>

  </main>
</body>
</html>